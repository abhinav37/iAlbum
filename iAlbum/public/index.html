<head>
	<title>Assignment3</title>
	<link rel="stylesheet" href="./stylesheets/style.css">
	<script	src="https://ajax.googleapis.com/ajax/libs/angularjs/1.4.8/angular.min.js"></script>
	<script	src="./javascripts/myscripts.js"></script>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
</head>
<body ng-app="iAlbum"	ng-controller="iAlbumController" ng-init="init()">
	<!--  TOP HEADING ELEMENTS  CONTAINS LOGIN AND iALBUM HEADER -->
	
    <div class="container">
    
    	<div class="row">
			<div class="col-md-4">
				<header class="header">iAlbum
				</header>
			</div>
			<div id="login" class="col-md-8" ng-if='friendlist[0] == undefined'>
				<form  ng-submit="login(log)">
					Username:
					<input type="text" name="username" value="Enter username" ng-model="log.name">
					Password:
					<input type="password" name="password" value="Enter password"ng-model="log.pass">
					<input type="submit" value="Submit">
				</form>
			</div>
			<div id="login" class="col-md-8" ng-if='friendlist[0]' style="left:500px">
				<form  ng-submit="logout()">
					Hello {{friendlist[0].username}}
					<input type="submit" value="logout">
				</form>
			</div>
		</div>

 <!-- MAIN PAGE -->
		<div class="row">
		
        <!--  SIDE BAR ELEMENTS CONATINS LIST OF FRIENDS   -->
		
        	<div class="col-md-2" style=" border-right: thick solid #ff0000">
				<div id="friendlist">
					<table class="table">
						<thead>
							<th>Albums</th>
						</thead>
						<tbody ng-if='friendlist[0]'>
							<tr>
								<td ng-class="{selected: 1 === idSelected}"  ng-click="get_al(0)">My Album</td>
							</tr>
							<tr	ng-repeat="friend in friendlist">
								<td ng-if='friend._id !== friendlist[0]._id 'ng-class="{selected: friend._id === idSelected}" 	 ng-click="get_al(friend._id)">{{friend.username}}'s</td>
							</tr>
						</tbody>
					</table>
				</div>
			</div>


            <!--  PHOTO SHOWCASE CONDITIONS DEFINED BELOW   -->
			<div class="col-md-10" ng-if='photos'>
				<div class="col-lg-3 col-md-4 thumb" ng-if='photos!="user"' ng-repeat="photo in photos" style="padding-top:30px">
                    
                    <a class="thumbnail" href="#">
					<img  class="img-responsive"  id="{{photo.userid}}" check-image ng-src="{{photo.url}}" style="overflow: hidden" ng-click="pop(this,photo,friendlist)" >
					</a>
	                <!--  LIKE PRINT   -->
	        		<a ng-repeat="likes in photo.likedby">{{likes}}, </a><a ng-if='photo.likedby.length!==0'>Liked this photo<a>
	                <br ng-if='photo.likedby.length<3'><br ng-if='photo.likedby.length<5'>
                    <!--  IF LIKED SHOW LIKED BUTTON   -->
                    <div ng-if="photo.likedby.indexOf(friendlist[0].username) >= 0">
                        <button class="btn" ng-if='photo.userid !== friendlist[0]._id ' type="button"  >Liked</button>
                    </div>
                    <!--  ELSE LIKE OPTION   -->
                    <div ng-if="photo.likedby.indexOf(friendlist[0].username) == -1">
                        <input class="btn lk" ng-if='photo.userid !== friendlist[0]._id ' type="button" value="like" ng-click="like(photo._id,photo.userid,this)">
                    </div>
                    <!--  OPTION TO DELETE IF PHOTOS BELONG TO USER LOGGED IN   -->
                    <input ng-if='photo.userid == friendlist[0]._id' type="button" value="delete" ng-click="delete(photo._id)">
				</div>
			</div>
		</div>
		
        <!--  UPLOAD DIV WITH CONDITION TO SHOW ONLY ON USER PAGE   -->
		
        <div class="row" ng-if='friendlist[0]'   style="padding-top:40px"  >
            <form ng-if='photos[0].userid == friendlist[0]._id|| photos == "user"'>
                <div class="col-md-6" >
                </div>
                <div class="col-md-3">
                    <input type="File" value="Choose File"   onchange="angular.element(this).scope().load(this.files)"/>
                </div>
                <div class="col-md-3" >
                    <input type="submit" value="upload" ng-click="upload()">
                </div>
            </form>
		</div>



	</div>


<!--  HIDDEN ELEMENT BOX THAT SHOWS ON CLICKING PICTURE   -->
   
   
    <!-- MODAL BOX I.E. IMAGE DIV THAT POPS ON CLICK  -->
		
	<div id="myModal" class="modal">
        <span class="close" style="font-size:50px;color:red">&times;</span>
        <img class="modal-content" id="img01">
        <div id="caption" ng-if='delta.x !== "x"'>
            
            <!--  WHAT BUTTONS TO SHOW CONDITIONS   -->
            <a ng-repeat="likes in delta.photo.likedby">{{likes}}, </a><a ng-if='delta.photo.likedby.length!==0'>Liked this photo<a>
            <div ng-if="delta.photo.likedby.indexOf(friendlist[0].username) >= 0">
                <button class="btn" style="font-size:15px" ng-if='delta.photo.userid !== friendlist[0]._id ' type="button"  >Liked</button>
            </div>
            <div ng-if="delta.photo.likedby.indexOf(friendlist[0].username) == -1">
                <input ng-if='delta.photo.userid !== delta.friendlist[0]._id' type="button" value="like" ng-click="like(delta.photo._id,delta.photo.userid);pop()" >
            </div>
            <input ng-if='delta.photo.userid == delta.friendlist[0]._id' type="button" value="delete" ng-click='delete(delta.photo._id);cl()' >
            
        </div>
	</div>
</body>

<!--  SCRIPT TO CLOSE MODAL BOX ON PRESSING X   -->
		
<script>
	var span = document.getElementsByClassName("close")[0];
	var modal = document.getElementById('myModal'); 
	span.onclick = function() { 
	    modal.style.display = "none";
	}
    

</script>